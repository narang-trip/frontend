import { useRef, useState } from "react";
import { IoIosArrowBack, IoMdClose } from "react-icons/io";

const cityData = {
  í•œêµ­: ["ì„œìš¸", "ê°•ì›ë„", "ê²½ìƒë„", "ì¶©ì²­ë„", "ì „ë¼ë„", "ì œì£¼ë„", "ìš¸ë¦‰ë„"],
  ì¼ë³¸: ["ì˜¤ì‚¬ì¹´", "ë„ì¿„", "í›„ì¿ ì˜¤ì¹´", "ì‚¿í¬ë¡œ", "êµí† ", "ë‹¤ì¹´ë§ˆì¸ "],
  í™ì½©: ["í™ì½©"],
  ëŒ€ë§Œ: ["ëŒ€ë§Œ"],
  ì¤‘êµ­: ["ë² ì´ì§•", "ìƒí•˜ì´", "ì¶©ì¹­", "í•˜ì–¼ë¹ˆ", "ì²­ë‘"],
  ëª½ê³¨: ["ìš¸ë€ë°”í† ë¥´"],
  ì‹±ê°€í¬ë¥´: ["ì‹±ê°€í¬ë¥´"],
  ë¯¸ì–€ë§ˆ: ["ì–‘ê³¤", "ë°”ê°„"],
  ìº„ë³´ë””ì•„: ["ì”¨ì— ë¦½", "í”„ë†ˆíœ"],
  í•„ë¦¬í•€: ["ì„¸ë¶€", "ë§ˆë‹ë¼", "ë³´ë¼ì¹´ì´"],
  ë§ë ˆì´ì‹œì•„: ["ì¿ ì•Œë¼ë£¸í‘¸ë¥´", "í˜ë‚­", "ì½”íƒ€í‚¤ë‚˜ë°œë£¨", "ë‘ì¹´ìœ„", "ì¡°í˜¸ë°”ë£¨"],
  ì¸ë„ë„¤ì‹œì•„: ["ë°œë¦¬", "ìì¹´ë¥´íƒ€", "ì¡±ìì¹´ë¥´íƒ€", "ë¡¬ë³µ"],
  íƒœêµ­: ["ë°©ì½•", "í‘¸ì¼“", "ì¹˜ì•™ë§ˆì´", "ë„ë¼ë¹„", "íŒŒíƒ€ì•¼"],
  ë² íŠ¸ë‚¨: ["í˜¸ì¹˜ë¯¼", "í•˜ë…¸ì´", "í˜¸ì´ì•ˆ", "ë‹¤ë‚­", "ë‹¬ë", "ë‚˜íŠ¸ë‘", "ì‚¬íŒŒ"],
  ìš°ì¦ˆë² í‚¤ìŠ¤íƒ„: ["ìš°ì¦ˆë² í‚¤ìŠ¤íƒ„"],
  í‹°ë² íŠ¸: ["í‹°ë² íŠ¸"],
  ì•„ëì—ë¯¸ë¦¬íŠ¸: ["ë‘ë°”ì´", "ì•„ë¶€ë‹¤ë¹„"],
  ëª°ë””ë¸Œ: ["ëª°ë””ë¸Œ"],
  ì¸ë„: ["ë­„ë°”ì´", "ë¸ë¦¬", "ì•„ê·¸ë¼", "ë°”ë¼ë‚˜ì‹œ"],
  ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„: ["ì‚¬ìš°ë””ì•„ë¼ë¹„ì•„"],
  ìŠ¤ìœ„ìŠ¤: ["ìŠ¤ìœ„ìŠ¤"],
  í”„ë‘ìŠ¤: ["íŒŒë¦¬", "ë‹ˆìŠ¤", "ë§ˆë¥´ì„¸ìœ "],
  ì˜êµ­: ["ëŸ°ë˜", "ë¦¬ë²„í’€", "ë§¨ì²´ìŠ¤í„°"],
  ì´íƒˆë¦¬ì•„: ["ë¡œë§ˆ", "ë‚˜í´ë¦¬", "ë² ë„¤ì¹˜ì•„"],
  í¬ë¥´íˆ¬ê°ˆ: ["ë¦¬ìŠ¤ë³¸"],
  ìŠ¤í˜ì¸: ["ë°”ë¥´ì…€ë¡œë‚˜", "ë§ˆë“œë¦¬ë“œ", "ì„¸ë¹„ì•¼"],
  ë…ì¼: ["í•¨ë¶€ë¥´í¬", "ë®Œí—¨", "ë² ë¥¼ë¦°"],
  ì˜¤ìŠ¤íŠ¸ë¦¬ì•„: ["ë¹„ì—”ë‚˜", "ì˜ì¸ ë¶€ë¥´í¬"],
  í¬ë¡œì•„í‹°ì•„: ["ë‘ë¸Œë¡œë¸Œë‹ˆí¬", "ìŠ¤í”Œë¦¬íŠ¸", "í”Œë¦¬íŠ¸ë¹„ì²´"],
  í˜¸ì£¼: ["ë¸Œë¦¬ì¦ˆë²ˆ", "ì‹œë“œë‹ˆ", "ë©œë²„ë¥¸"],
  ë‰´ì§ˆëœë“œ: ["ì˜¤í´ëœë“œ", "ì›°ë§í„´", "í¬ë¼ì´ìŠ¤íŠ¸ì²˜ì¹˜"],
  íŒ”ë¼ìš°: ["íŒ”ë¼ìš°"],
  ì´ì§‘íŠ¸: ["ì¹´ì´ë¡œ"],
  ë‚˜ë¯¸ë¹„ì•„: ["ë‚˜ë¯¸ë¹„ì•„"],
  ìˆ˜ë‹¨: ["ìˆ˜ë‹¨"],
  ë¯¸êµ­: ["ë‰´ìš•", "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", "ìƒŒí”„ë€ì‹œìŠ¤ì½”", "ìƒŒë””ì—ì´ê³ "],
  ë©•ì‹œì½”: ["ë©•ì‹œì½”ì‹œí‹°", "ì¹¸ì¿¤", "êµ¬ì•„ë‹¤ë¼í•˜ë¼"],
  ìºë‚˜ë‹¤: ["í† ë¡ í† ", "ë°´ì¿ ë²„", "ëª¬íŠ¸ë¦¬ì˜¬"],
  ë¸Œë¼ì§ˆ: ["ë¦¬ìš°ë°ìë„¤ì´ë£¨", "ìƒíŒŒìš¸ë£¨", "ì‚´ë°”ë„ë¥´"],
  ì•„ë¥´í—¨í‹°ë‚˜: ["ë¶€ì—ë…¸ìŠ¤ì•„ì´ë ˆìŠ¤", "ì½”ë¥´ë„ë°”", "ëª¬í…Œë¹„ë°ì˜¤"],
  í˜ë£¨: ["ë¦¬ë§ˆ", "ì¿ ìŠ¤ì½”", "ì•„ë ˆí‚¤íŒŒ"],
  ìš°ë£¨ê³¼ì´: ["ëª¬í…Œë¹„ë°ì˜¤", "í‘¼íƒ€ë¸ì—ìŠ¤í…Œ", "ì½œë¡œë‹ˆì•„ë¸ì‚¬í¬ë¼ë©˜í† "],
  ë³¼ë¦¬ë¹„ì•„: ["ë¼íŒŒìŠ¤", "ìˆ˜í¬ë ˆ", "ì½”ì¹´ë°¤ë°”"],
};

const CityModal = ({ onBack, onClose, selectedCountry, onSelectedCity }) => {
  const modalBG = useRef("");

  const [selectedCity, setSelectedCity] = useState(null);

  const handleCountrySelect = (city) => {
    setSelectedCity(city);
    // ë„ì‹œë¥¼ ì„ íƒí•œ í›„ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ë„ì‹œ ì •ë³´ë¥¼ ì „ë‹¬
    onSelectedCity(city);
    // ëª¨ë‹¬ì„ ë‹«ìŒ
    onClose();
  };

  return (
    <div
      className="fixed top-0 bottom-0 left-0 right-0 z-50 flex items-center justify-center bg-gray-100 bg-opacity-0"
      onClick={onClose}
      ref={modalBG}
    >
      <div
        className="z-10 px-10 py-8 bg-white w-[28rem] h-[40rem] rounded-3xl"
        onClick={(e) => {
          e.stopPropagation();
        }}
      >
        <div className=" font-spoqa">
          <div className="flex justify-between">
            <button
              className="mb-4 text-xl font-semibold hover:text-red-500"
              onClick={onBack}
            >
              <IoIosArrowBack />
            </button>
            <button
              className="mb-4 text-xl font-semibold hover:text-red-600"
              onClick={onClose}
            >
              <IoMdClose />
            </button>
          </div>
          <p className="m-3 text-lg font-bold text-center">
            ë„ì‹œğŸ—½ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!
          </p>
          <div className="inline-block mb-4 align-middle">
            <div className="flex flex-wrap justify-center">
              {cityData[selectedCountry].map((city) => (
                <button
                  className="w-[10rem] h-[4.5rem] m-3 text-base rounded-xl bg-stone-100 hover:bg-amber-200"
                  key={city}
                  onClick={() => handleCountrySelect(city)}
                >
                  {city}
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default CityModal;
